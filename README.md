# Canvas New Quiz data scraper

Bulk download student response data from Canvas' mysterious New Quiz tool.

## Overview

[Canvas Learning Management System](https://www.instructure.com/canvas/) is updating their Quiz Functionality.
The new version, helpfully called "New Quizzes" is still apparently in beta (as of January 2021) and __still lacks a feature to download student responses in bulk.__
If you are one of the many frustrated educators who was seduced by the shiny new features in New Quizzes and now finds that their students' data is locked in some arcane sanctum, this tool is for you.

New Quizzes is implemented as an "external tool" like Gradescope, Flipgrid, or many other tools which integrate with Canvas through the [LTI API](https://canvas.instructure.com/doc/api/file.tools_intro.html). When you view a student's quiz results through the Canvas browser interface, the New Quiz tool fetches their data using a separate API, which is not documented, but easily reverse-engineered.

### Caveats

This tool was developed for __one specific use case__ of a particular course at Cornell University with more than 1,000 students and a series of very simple multiple-choice quizzes.
This tool does not work for any other question types, and has not been extensively debugged for edge cases.
I ran into a few obvious edge cases (missing submission, missing submission with manually-assigned grade), but I'm sure there are dozens of others.

### Security

You'll need to generate a Canvas API token. __You should treat this like a password__.
This script looks for a text file called `API_KEY.txt` in the same directory as the script.
I'm sure there's a more secure best-practice for this, but it's not a priority for me since I only used this script for one class.
Set an expiration date for your API KEY and just make sure it doesn't fall into the wrong hands...

## Requirements

- Python 3
- Jupyter Notebook
- [CanvasAPI package](https://github.com/ucfopen/canvasapi)
- Your own Canvas API key
- A little bit, but not too much, of Python savvy

## Usage

Open `get_new_quiz_responses.ipynb` using Jupyter and follow the instructions.
See `RESPONSE_DATA_SCHEMA.txt` for a detailed description of the output files generated by the script.
